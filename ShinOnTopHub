-- // 1. Loading Screen (20 Seconds)
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

local loadingGui = Instance.new("ScreenGui", PlayerGui)
loadingGui.Name = "PinkLoadingScreen"
loadingGui.IgnoreGuiInset = true
loadingGui.ResetOnSpawn = false
loadingGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local bg = Instance.new("Frame", loadingGui)
bg.Size = UDim2.new(1, 0, 1, 0)
bg.BackgroundColor3 = Color3.fromRGB(255, 182, 193)

local text = Instance.new("TextLabel", bg)
text.AnchorPoint = Vector2.new(0.5, 0.5)
text.Position = UDim2.new(0.5, 0, 0.5, 0)
text.Size = UDim2.new(0.6, 0, 0.2, 0)
text.Text = "ðŸŒ¸ Loading Visual Spawner... ðŸŒ¸"
text.Font = Enum.Font.FredokaOne
text.TextScaled = true
text.BackgroundTransparency = 1
text.TextColor3 = Color3.fromRGB(255, 255, 255)

local tween = TweenService:Create(text, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
	TextColor3 = Color3.fromRGB(255, 105, 180)
})
tween:Play()

task.wait(20)
loadingGui:Destroy()

-- // 2. Toggle Button to Open GUI
local toggleGui = Instance.new("ScreenGui", PlayerGui)
toggleGui.Name = "OpenGUI"
toggleGui.ResetOnSpawn = false
toggleGui.IgnoreGuiInset = true

local toggleButton = Instance.new("TextButton", toggleGui)
toggleButton.Size = UDim2.new(0, 120, 0, 40)
toggleButton.Position = UDim2.new(0, 10, 0.5, -20)
toggleButton.BackgroundColor3 = Color3.fromRGB(255, 182, 193)
toggleButton.Text = "ðŸŒ¸ Open GUI"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.TextScaled = true
toggleButton.BorderSizePixel = 0

-- // 3. Load Rayfield & Spawner
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()
local Spawner = loadstring(game:HttpGet("https://codeberg.org/darkdarkdark/roblox/raw/branch/main/Spawner.lua"))()

-- Defer GUI creation
local guiOpened = false

toggleButton.MouseButton1Click:Connect(function()
	if guiOpened then return end
	guiOpened = true
	toggleButton.Text = "âœ… GUI Loaded"

	Spawner.Load()
	local Pets = Spawner.GetPets()
	local Seeds = Spawner.GetSeeds()
	local Eggs = Spawner.GetEggs()

	local Window = Rayfield:CreateWindow({
		Name = "ðŸŒ¸ Visual Spawner GUI",
		LoadingTitle = "Spawner Menu",
		LoadingSubtitle = "by ShinOnTop",
		ConfigurationSaving = {
			Enabled = true,
			FolderName = "VisualSpawner",
			FileName = "SpawnerConfig"
		},
		KeySystem = false
	})

	-- PINK THEME BACKGROUND: Add a full pink background behind GUI
	local bgGui = Instance.new("ScreenGui", PlayerGui)
	bgGui.Name = "PinkBG"
	bgGui.DisplayOrder = -10 -- Ensure it's behind Rayfield
	bgGui.ResetOnSpawn = false

	local bgFrame = Instance.new("Frame", bgGui)
	bgFrame.Size = UDim2.new(1, 0, 1, 0)
	bgFrame.BackgroundColor3 = Color3.fromRGB(255, 200, 220)

	-- WATERMARK in corner
	local watermark = Instance.new("TextLabel", bgGui)
	watermark.Text = "Made By: ShinOnTop"
	watermark.Size = UDim2.new(0, 200, 0, 25)
	watermark.Position = UDim2.new(1, -210, 1, -30)
	watermark.BackgroundTransparency = 1
	watermark.TextColor3 = Color3.fromRGB(255, 105, 180)
	watermark.Font = Enum.Font.GothamSemibold
	watermark.TextSize = 16
	watermark.TextXAlignment = Enum.TextXAlignment.Right

	local MainTab = Window:CreateTab("Spawner", 4483362458)

	local selectedPet = Pets[1]
	local petWeight = 1
	local petAge = 1

	MainTab:CreateDropdown({
		Name = "Select Pet",
		Options = Pets,
		CurrentOption = selectedPet,
		Callback = function(option)
			selectedPet = option
		end,
	})

	MainTab:CreateSlider({
		Name = "Pet Weight (KG)",
		Range = {1, 100},
		Increment = 1,
		CurrentValue = 1,
		Callback = function(Value)
			petWeight = Value
		end,
	})

	MainTab:CreateSlider({
		Name = "Pet Age",
		Range = {1, 100},
		Increment = 1,
		CurrentValue = 1,
		Callback = function(Value)
			petAge = Value
		end,
	})

	MainTab:CreateButton({
		Name = "Spawn Selected Pet",
		Callback = function()
			Spawner.SpawnPet(selectedPet, petWeight, petAge)
			Rayfield:Notify({Title = "Spawner", Content = "Spawned "..selectedPet.."!", Duration = 4})
		end
	})

	MainTab:CreateDropdown({
		Name = "Spawn Seed",
		Options = Seeds,
		CurrentOption = Seeds[1],
		Callback = function(seed)
			Spawner.SpawnSeed(seed)
			Rayfield:Notify({Title = "Spawner", Content = "Spawned "..seed.."!", Duration = 4})
		end
	})

	MainTab:CreateDropdown({
		Name = "Spawn Egg",
		Options = Eggs,
		CurrentOption = Eggs[1],
		Callback = function(egg)
			Spawner.SpawnEgg(egg)
			Rayfield:Notify({Title = "Spawner", Content = "Spawned "..egg.."!", Duration = 4})
		end
	})

	MainTab:CreateDropdown({
		Name = "Spin Seed",
		Options = Seeds,
		CurrentOption = Seeds[1],
		Callback = function(seed)
			Spawner.Spin(seed)
			Rayfield:Notify({Title = "Spawner", Content = "Spun "..seed.."!", Duration = 4})
		end
	})

	MainTab:CreateButton({
		Name = "Load Spawner UI",
		Callback = function()
			Spawner.Load()
		end
	})
end)
